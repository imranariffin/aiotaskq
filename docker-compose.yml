version: "3"

services:
    redis:
        image: "redis"
        expose:
            - "6379"
        ports:
            - "127.0.0.1:6379:6379"
    
    rcli:
        image: "redis"
        links:
            - redis
        command: redis-cli -h redis
        depends_on: 
            - redis

    db_sample_app_django:
        image: "postgres"
        healthcheck:
            test: ["CMD-SHELL", "pg_isready"]
            interval: 1s
            timeout: 5s
            retries: 10
        ports:
            - 5432:5432
        environment:
            - POSTGRES_USER=postgres
            - POSTGRES_PASSWORD=postgres
            - POSTGRES_DATABASE=sample_app_django
